USE springweb2;

drop table if exists movies;
drop table if exists replies;

create table movies(
	mNo	int unsigned auto_increment primary key,
	mName varchar(255) not null,
    mDirector varchar(50) not null,
    mIntro longtext,
    mGenre varchar(50),
    mPassword varchar(50) not null
) AUTO_INCREMENT=1001;

create table replies(
	rNo int auto_increment primary key,
    rContent longtext not null,
    rPassword varchar(50) not null,
    mNo int unsigned not null,
    CONSTRAINT FOREIGN KEY (mNo) REFERENCES movies(mNo)
) auto_increment=2001;

-- sample data
insert into movies (mName, mDirector, mIntro, mGenre, mPassword) values
('기생충', '봉준호', '가난한 가족이 부유한 집에 하나씩 침투하면서 벌어지는 예측불허의 이야기.', '드라마', 'pw001'),
('올드보이', '박찬욱', '15년간 감금된 남자가 풀려난 후 복수를 시작하며 밝혀지는 충격적인 진실.', '스릴러', 'pw002'),
('부산행', '연상호', '좀비 바이러스가 퍼진 대한민국, 생존을 위한 치열한 사투가 벌어지는 열차 안.', '액션', 'pw003'),
('태극기 휘날리며', '강제규', '한국전쟁 속에서 형제가 겪는 비극적인 운명과 가족애를 그린 영화.', '전쟁', 'pw004'),
('범죄도시', '강윤성', '강력계 형사와 베트남 조직폭력배의 대결을 그린 범죄 액션 영화.', '범죄', 'pw005'),
('친절한 금자씨', '박찬욱', '복수를 위해 13년을 준비한 여자의 치밀한 계획과 감정의 변화.', '드라마', 'pw006'),
('극한직업', '이병헌', '마약 조직을 잡기 위해 치킨집을 위장 운영하던 형사들이 뜻밖의 성공을 거두는 코미디.', '코미디', 'pw007'),
('암살', '최동훈', '일제강점기, 독립군 저격수의 활약을 그린 역사 액션 영화.', '역사', 'pw008'),
('신과함께-죄와 벌', '김용화', '사후 세계에서 벌어지는 저승 삼차사의 재판과 인간적인 이야기.', '판타지', 'pw009'),
('살인의 추억', '봉준호', '1980년대 화성 연쇄살인사건을 바탕으로 한 실화 기반의 스릴러.', '스릴러', 'pw010');

insert into replies (rContent, rPassword, mNo) values
-- 기생충 (1001)
('정말 사회적 메시지가 강렬하네요.', 'pw123', 1001),
('봉준호 감독 최고!', 'pw124', 1001),
('엔딩이 너무 인상 깊었어요.', 'pw125', 1001),
('배우들 연기력이 대단했어요.', 'pw126', 1001),
('다시 봐도 소름 돋는 영화입니다.', 'pw127', 1001),

-- 올드보이 (1002)
('반전이 충격적이었어요.', 'pw128', 1002),
('박찬욱 감독의 미장센이 멋져요.', 'pw129', 1002),
('이 영화는 진짜 레전드입니다.', 'pw130', 1002),
('복수극의 정석 같아요.', 'pw131', 1002),
('최민식 배우 연기력 미쳤어요.', 'pw132', 1002),

-- 부산행 (1003)
('좀비 영화 중 최고였어요.', 'pw133', 1003),
('액션과 감동이 동시에!', 'pw134', 1003),
('마동석 캐릭터 너무 멋졌어요.', 'pw135', 1003),
('긴장감 넘치는 전개였습니다.', 'pw136', 1003),
('눈물 나는 좀비 영화라니...', 'pw137', 1003),

-- 태극기 휘날리며 (1004)
('형제애가 너무 감동적이에요.', 'pw138', 1004),
('전쟁의 참혹함을 잘 보여줬어요.', 'pw139', 1004),
('이병헌 연기력 대단합니다.', 'pw140', 1004),
('음악도 너무 슬펐어요.', 'pw141', 1004),
('한국 영화의 수준을 높인 작품.', 'pw142', 1004),

-- 범죄도시 (1005)
('액션이 시원시원해서 좋았어요.', 'pw143', 1005),
('마석도 형사 캐릭터 최고!', 'pw144', 1005),
('실화 기반이라 더 몰입됐어요.', 'pw145', 1005),
('윤계상 배우 연기 무서웠어요.', 'pw146', 1005),
('속편도 기대됩니다.', 'pw147', 1005),

-- 친절한 금자씨 (1006)
('복수의 방식이 독특했어요.', 'pw148', 1006),
('영상미가 예술이에요.', 'pw149', 1006),
('이영애 배우의 연기력이 대단해요.', 'pw150', 1006),
('박찬욱 감독의 감성이 느껴져요.', 'pw151', 1006),
('스토리가 깊이 있어요.', 'pw152', 1006),

-- 극한직업 (1007)
('진짜 웃다가 배꼽 빠졌어요.', 'pw153', 1007),
('치킨이 먹고 싶어지는 영화.', 'pw154', 1007),
('코미디 연출이 탁월했어요.', 'pw155', 1007),
('형사들이 너무 귀여웠어요.', 'pw156', 1007),
('가볍게 보기 좋은 영화예요.', 'pw157', 1007),

-- 암살 (1008)
('역사적 배경이 흥미로웠어요.', 'pw158', 1008),
('전지현 배우 멋졌어요.', 'pw159', 1008),
('액션과 드라마가 잘 어우러졌어요.', 'pw160', 1008),
('일제강점기 배경이 인상 깊어요.', 'pw161', 1008),
('최동훈 감독의 연출력이 돋보여요.', 'pw162', 1008),

-- 신과함께-죄와 벌 (1009)
('CG 퀄리티가 엄청났어요.', 'pw163', 1009),
('스토리가 감동적이었어요.', 'pw164', 1009),
('저승 세계 설정이 참신했어요.', 'pw165', 1009),
('하정우 배우 연기 좋았어요.', 'pw166', 1009),
('눈물 나는 장면이 많았어요.', 'pw167', 1009),

-- 살인의 추억 (1010)
('실화라서 더 무서웠어요.', 'pw168', 1010),
('봉준호 감독의 연출력이 대단해요.', 'pw169', 1010),
('송강호 배우 연기력 최고.', 'pw170', 1010),
('미스터리한 분위기가 좋았어요.', 'pw171', 1010),
('끝까지 긴장감 넘쳤어요.', 'pw172', 1010);


-- text

select * from movies;
select * from replies;

select * from replies where mno=1001 order by rno desc;

delete from movies where mno=1011 and mPassword="pw0011";

insert into movies (mName, mDirector, mIntro, mGenre, mPassword) values("베어더뮤지컬","누군가","뮤지커어어어얼","뮤지컬","pw0011");

select * from replies where mno=1001 order by rno desc;