[ 데이터베이스 ]
    SQL : MYSQL,
    NOSQL : Redis

[ JDBC ]
    Java와 DB를 연동하는 인터페이스
    7, 8월 : Dao
    9, 10월 : MyBatis
    11월 : JPA

[ ORM; Object Realtional Mapping, 객체 관계 매핑 기술  ]
    정의 : 객체지향 프로그래밍에서 사용되는 객체와 DB(관계형 데이터베이스)를 매핑하는 것
    목적 : 편리성 제공
    사용처 : MyBatis, JPA etc.

[ Hibernate ]
    정의 : Java에서 ORM을 구현한 프레임워크
    목적 : SQL 없이 순수하게 Java 만으로 DB를 처리하기 위함
    기능 : CRUD, 타입변환, 부가기능(검색/정렬/페이징처리) etc

[ JPA; Java Persistence API ]
    Java의 영속성·지속성 API
    정의 : Java의 ORM을 사용할 때 표준 API
    설치 : gradle ` implementation 'org.springframework.boot:spring-boot-starter-data-jpa' `
    기능 : 영속된 관계에서 자바 객체가 변화되면 DB도 같이 변경

[ Entity ]
    1. 정의
        데이터베이스 테이블과 매핑된 클래스
        Entity 클레스 = DB 테이블
        Entity 객체 = 레코드

    2. 사용법
        1) 선언
            클래스위에 `@Entity` 어노테이션 주입
            Entity 한 개에 @Id 주입 필수  => PK
        2) Entity 매핑 설정 > application.properties
            2-1) JPA DDL 설정
                아래 3개 중 1개만 사용해야 함
                ```properties
                    # Entity 테이블 CUD
                    # [8.1] Entity 테이블 삭제 후 생성
                    # spring.jpa.hibernate.ddl-auto=create
                    # [8.2] Entity 테이블이 존재하면 수정 / 존재하지 않으면 생성
                    spring.jpa.hibernate.ddl-auto=update
                    # [8.3] Entity 테이블을 직접관리하기 위해, CRUD 기능을 부여하지 않음
                    # spring.jpa.hibernate.ddl-auto=none
                ```
            2-2) 추가 옵션
                ```properties
                    # [8.4] JPA가 처리한 SQL 문을 console에 출력
                    spring.jpa.show-sql=true
                    # [8.5] console에 출력된 SQL을 줄바꿈 처리하여 가독성을 높임
                    spring.jpa.properties.hibernate.format_sql=true
                    # [8.6] JPA가 처리한 SQL의 매개변수를 console에 출력
                    logging.level.org.hibernate.sql = DEBUG
                    logging.level.org.hibernate.orm.jdbc.bind=TRACE

                ```
        3) 주요 어노테이션
            @Entity         : 해당 클래스를 데이터베이스 테이블과 매핑
            @Id             : 해당 클래스/테이블의 PK를 주입
            @Table(name=::) : 테이블명 설정
            @GeneratedValued( strategy = GenerationType.IDENTITY )
                            : PK에 auto_increment 지원 (MySQL 에서만 가능)
            @Column         : 테이블 속성(열/컬럼) 정의
                ( nullable = true/false )       : not null 제약조건
                ( unique = true/false )         : unique 제약조건
                ( name = "필드명" )              : 필드명 설정
                ( length = 길이 )                : 길이가 존재하는 필드의 길이 정의
                ( insertable = true/false )     : insert할 대 적용할 필드 설정
                ( updatable = true/false )      : update할 때 적용할 필드 설정


[ JPA Repository ]
    정의 : CRUD 작업을 제공하는 인터페이스 + 동적쿼리 제공
    사용법
        1) 도메인Repository 인터페이스 생성
        2) `@Repository` 주입
        3) extends JpaRepository<T, Id>
            T   : 테이블 - 조작할 테이블 = Entity
            Id  : PK의 타입 - col1 > Integer


주의 : controller 에서는 Entity를 불러서 사용하지 않는다.
Controller - DTO
Service - Entity


[ JPA 기본 함수 ]
    .save(T)
        - 저장할 엔티티가 존재하지 않으면 INSERT, 존재하면 UPDATE
        - 영속성의 특징으로 별도의 update func이 존재하지 않음
    .findAll()
        - 모든 엔티티를 조회
    .findById(Id)
        - Id에 해당하는 엔티티를 조회
    .deleteById(Id)
        - Id에 해당하는 엔티티를 삭제

    T1.set@@(T2.get@@( ) )
        - Setter를 이용하여 수정할 경우, 영속성에 의해 자동으로 Update 됨
        - 단, @Transactional 필수!!

    ※ 영속성을 갖는 시점
        .save() / .find() / .delete() 등 메소드가 실행되어 엔티티가 DB와 연결된 시점
        - 관례적으로 엔티티는 MVC 패턴 중 Service에서만 사용
        - service 외에서는 DTO/VO 활용

    ※ Optional< T >
        - NullPointException 관련 메소드 기능을 제공하는 클래스
        .isPresent()
            - 엔티티가 존재하는지를 확인
            - True : 존재 / False : Null
        .get()
            - T를 반환
        .orElse( null일 때 값 )
        .orElseThrow( 예외객체 )

[ JPA Auditing ]
    - 정의
        : 엔티티의 생성/수정 변화를 기록하는 것을 자동으로 감시하는 기능
    - 목적
        : SQL INSERT/UPDATE를 감시하여 기록
    - 사용처
        : BaseTime 상속 클래스
    - 사용법
        1) AppStart 클래스 위에 @EnableJpaAuditing 주입
        2) BaseTime 클래스 생성
            ```java
                @Getter
                @MappedSuperclass
                @EntityListeners(AuditingEntityListener.class)
                public class BaseTime {

                    @CreatedDate
                    private LocalDateTime createdAt;    // 등록일

                    @LastModifiedDate
                    private LocalDateTime updatedAt;    // 수정일

                } // class end
            ```
        3) BaseTime을 사용할 엔티티 클래스에 BaseTime을 상속

[ JPA Entity 와 MVC DTO/VO 관계·변환 ]
    - Spring Web은 MVC2 3Tire 패턴을 사용
    - Entity 클래스는 toDto 메소드로 entity > Dto 변환 기능을 제공
    - DTO 클래스는 toEntity 메소드로 Dto > entity 변환 기능을 제공

        `View`         <-- JSON/DTO --> `Controller`        <-- DTO --> `Service`   <-- Entity --> Repository/DAO/Mapper
        HTML/JS                         @RestController                 @Service
        JPS/JS
        REACT                           --> DTO/MAP 사용권장             --> 비즈니스 로직
        + 타임리프/머스테치                                               --> DTO <-> Entity 변환